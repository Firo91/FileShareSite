{% extends 'home.html' %}

{% block content %}
  <!-- Breadcrumb -->
  <div class="mb-4">
    {% for bc_folder in breadcrumb %}
        <a href="{% url 'folder_view' bc_folder.id %}" class="text-blue-500 hover:underline">{{ bc_folder.name }}</a>
        {% if not forloop.last %}<span class="mx-2 text-gray-400">/</span>{% endif %}
    {% endfor %}
  </div>

  <!-- Folder Name -->
  <h2 class="text-2xl font-bold mb-4">{{ folder.name }}</h2>
  
  <!-- Files List -->
  <ul class="list-decimal list-inside space-y-2">
    {% for file in current_page %}
      <li class="bg-white p-4 rounded shadow">
        <a href="{% url 'file_download' file.id %}" download class="text-blue-500 hover:underline">{{ file.file.name }}</a> 
        <span class="text-gray-600">- Uploaded on {{ file.created_at }}</span>
        <form action="{% url 'delete_item' 'file' file.id %}" method="POST" onsubmit="return confirm('Are you sure you want to delete this file?');" class="inline-block ml-4">
            {% csrf_token %}
            <button type="submit" class="text-sm bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Delete File</button>
        </form>
      </li>
    {% empty %}
      <li class="bg-white p-4 rounded shadow text-gray-500">No files in this folder.</li>
    {% endfor %}
  </ul>

  <!-- Pagination -->
  <div class="mt-6">
    <span class="text-gray-600">Page {{ current_page.number }} of {{ current_page.paginator.num_pages }}</span>
    <div class="inline-block space-x-2">
        {% if current_page.has_previous %}
            <a href="{% url 'folder_view' folder.id current_page.previous_page_number %}" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Previous</a>
        {% endif %}
        {% if current_page.has_next %}
            <a href="{% url 'folder_view' folder.id current_page.next_page_number %}" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Next</a>
        {% endif %}
    </div>
  </div>
{% endblock %}