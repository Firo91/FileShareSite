{% extends 'home.html' %}

{% block content %}
<form method="POST" action="{% url 'share_file' file.id %}">
    {% csrf_token %}
    <h2>Share File: {{ file.file.name }}</h2>

    <!-- Display Django Messages (feedback) -->
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <label for="user_id">User:</label>
    <select name="user_id" id="user_id">
        {% for user in users %}
            <option value="{{ user.id }}">{{ user.username }}</option>
        {% endfor %}
    </select>
    <br>

    <!-- Show list of users the file is already shared with -->
    <h3>File is already shared with:</h3>
    <ul>
        {% for user in shared_with %}
            <li>{{ user }}</li>
        {% empty %}
            <li>File is not shared with anyone yet.</li>
        {% endfor %}
    </ul>

    <button type="submit">Share</button>
</form>
{% endblock %}